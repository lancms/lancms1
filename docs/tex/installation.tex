\chapter{Installation}

There are two ways of installation LANCMS, one is the official releases from launchpad.net/lancms, the other is from the code repository on Bazaar.
If you are not an experienced Linux/UNIX sysadmin, you probably want to download the official releases. They probably aren't very up2date, but they should work.
The trunk-code in Bazaar is the most updated code, and we try to always keep it working (since that is the version we're running ourself).

\section{Install from a release}
\begin{itemize}
\item Get the latest from http://launchpad.net/lancms
\item Unpack it in a place where your webserver can reach it
\item Edit settings in config.php
\item If you've not done it already, create the database and grant access to it:
\end{itemize}
\begin{lstlisting}
mysql> CREATE DATABASE lancmsdb;
mysql> GRANT ALL PRIVILEGES ON lancmsdb.* to
       'lancmsuser'@'localhost' IDENTIFIED BY 'lancmspass';
\end{lstlisting}
\begin{itemize}
\item Change the rights of the tmp-folder to 777 or allow the Apache/webserver-user rights to read and write to the folder below (chmod 777 tmp -R)
\item To install/upgrade the database, visit http://your.server.name/installer/run.php
\end{itemize}

\section{Install from the lancms1-series in bazaar/launchpad}
\begin{itemize}
\item Do \lstinline!bzr checkout lp:lancms! in a place where your webserver can reach it
\item Create a file called 'OverrideConfig.php' in the base directory containing the settings from config.php you want to override:
\end{itemize}
\begin{lstlisting}
<?php
// SQL type. Valid options are: mysql
$sql_type = "mysql";

// SQL server
$sql_host = "localhost";
// SQL database name
$sql_base = "lancmsdb";

// SQL username
$sql_user = "lancmsuser";
// SQL password
$sql_pass = "lancmspass";

// SQL prefix. This is a prefix for the table names, _ is added automatically.
$sql_prefix = "lancms";

// Title
$design_title = 'lancms';

// Languages supported are "norwegian" and "english". Check launchpad for more translations
$language = "norwegian";

// Name of the web cookie
$lancms_session_cookie = "cookiemonster";

// optional logo in footer. comment out if you don't want it.
$design_footer['logo'] = 'http://localhost/logo.png';
$design_footer['width'] = 69;
$design_footer['height'] = 90;
$design_footer['url'] = 'http://localhost/';

?>
\end{lstlisting}
\begin{itemize}
\item If you've not done it already, create the database and grant access to
it:
\end{itemize}
\begin{lstlisting}
mysql> CREATE DATABASE lancmsdb;
mysql> GRANT ALL PRIVILEGES ON lancmsdb.* to
       'lancmsuser'@'localhost' IDENTIFIED BY 'lancmspass';
\end{lstlisting}
\begin{itemize}
\item \lstinline!chmod 777 tmp -R!
\item To install/upgrade the database, visit
http://your.server.name/installer/run.php
\end{itemize}

\section{Upgrading when using Bazaar}
\begin{itemize}
\item \lstinline!cd /path/to/lancms/!
\item \lstinline!bzr update!
\item \lstinline!chown www-data . -R!
\item \lstinline!cd installer!
\item \lstinline!php run.php!
\end{itemize}
